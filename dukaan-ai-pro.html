<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§¶‡•Å‡§ï‡§æ‡§® AI Pro - Complete Business Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Mukta:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B35;
            --primary-dark: #E85A2B;
            --secondary: #004E89;
            --accent: #FFC857;
            --success: #06D6A0;
            --warning: #F77F00;
            --danger: #D62828;
            --bg-light: #F8F9FA;
            --bg-white: #FFFFFF;
            --text-dark: #1A1A1A;
            --text-gray: #6C757D;
            --border: #E0E0E0;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Mukta', 'Poppins', sans-serif;
            background: linear-gradient(135deg, #F8F9FA 0%, #E8EDF2 100%);
            color: var(--text-dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--secondary) 0%, #003D6B 100%);
            color: white;
            padding: 24px 32px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 78, 137, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .tagline {
            font-size: 16px;
            opacity: 0.9;
            margin-left: 52px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .voice-btn, .quick-action-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
            transition: all 0.3s ease;
        }

        .voice-btn:hover, .quick-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.5);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .nav-tab {
            background: white;
            border: 2px solid var(--border);
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-gray);
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-tab:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border-color: var(--primary);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Grid Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 24px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px var(--shadow);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .icon-primary { background: linear-gradient(135deg, #FFE5DC 0%, #FFD4C7 100%); color: var(--primary); }
        .icon-success { background: linear-gradient(135deg, #D4F4EC 0%, #B8EFE1 100%); color: var(--success); }
        .icon-warning { background: linear-gradient(135deg, #FFECCC 0%, #FFE1B3 100%); color: var(--warning); }
        .icon-secondary { background: linear-gradient(135deg, #CCE4F5 0%, #B3D7EF 100%); color: var(--secondary); }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-gray);
        }

        .stat-change {
            font-size: 13px;
            font-weight: 600;
            margin-top: 8px;
        }

        .stat-change.positive {
            color: var(--success);
        }

        .stat-change.negative {
            color: var(--danger);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .data-table th {
            background: var(--bg-light);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--border);
            font-size: 14px;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        .data-table tr:hover {
            background: var(--bg-light);
        }

        /* Forms */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
            font-size: 14px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-gray);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: var(--bg-light);
        }

        /* Badges */
        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .badge-success { background: #D4F4EC; color: var(--success); }
        .badge-warning { background: #FFF3CD; color: var(--warning); }
        .badge-danger { background: #FFE5E5; color: var(--danger); }
        .badge-primary { background: #FFE5DC; color: var(--primary); }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .tagline {
                margin-left: 0;
            }

            .nav-tabs {
                overflow-x: scroll;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* AI Suggestions */
        .ai-suggestion {
            background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
            border-left: 4px solid var(--secondary);
            padding: 16px;
            border-radius: 10px;
            margin-bottom: 12px;
        }

        .ai-suggestion-header {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-suggestion-text {
            font-size: 14px;
            color: var(--text-dark);
        }

        /* Quick Stats */
        .quick-stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .quick-stat:last-child {
            border-bottom: none;
        }

        /* Help Modal */
        .help-modal {
            max-width: 900px !important;
        }

        .help-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            border-bottom: 2px solid var(--border);
            padding-bottom: 8px;
        }

        .help-tab {
            padding: 10px 20px;
            background: var(--bg-light);
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-gray);
            transition: all 0.3s ease;
        }

        .help-tab:hover {
            background: var(--border);
        }

        .help-tab.active {
            background: var(--primary);
            color: white;
        }

        .help-content {
            display: none;
        }

        .help-content.active {
            display: block;
        }

        .tutorial-card {
            background: linear-gradient(135deg, #F8F9FA 0%, #FFFFFF 100%);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .tutorial-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px var(--shadow);
            transform: translateX(4px);
        }

        .tutorial-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .tutorial-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .tutorial-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .tutorial-steps {
            margin-left: 60px;
        }

        .tutorial-step {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 8px;
            background: white;
            border-radius: 8px;
        }

        .step-number {
            width: 24px;
            height: 24px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            flex-shrink: 0;
        }

        .step-text {
            flex: 1;
            color: var(--text-dark);
            font-size: 14px;
            line-height: 1.6;
        }

        .tutorial-tip {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFF3CC 100%);
            border-left: 4px solid var(--accent);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            margin-left: 60px;
        }

        .tutorial-tip-header {
            font-weight: 600;
            color: var(--warning);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tutorial-tip-text {
            font-size: 13px;
            color: var(--text-dark);
        }

        .video-demo {
            background: linear-gradient(135deg, #E8EDF2 0%, #D0D9E3 100%);
            padding: 40px;
            border-radius: 12px;
            text-align: center;
            margin: 16px 0;
        }

        .video-demo-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .quick-link-card {
            background: white;
            border: 2px solid var(--border);
            padding: 16px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-link-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .quick-link-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .quick-link-title {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }

        .faq-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .faq-item:hover {
            border-color: var(--primary);
        }

        .faq-question {
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            display: none;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            color: var(--text-gray);
            font-size: 14px;
            line-height: 1.6;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        .faq-item.active .faq-question::after {
            content: '‚àí';
        }

        .faq-question::after {
            content: '+';
            font-size: 24px;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="logo-section">
                    <h1>
                        <span class="logo-icon">üè™</span>
                        ‡§¶‡•Å‡§ï‡§æ‡§® AI Pro
                    </h1>
                    <p class="tagline">Complete Business Management System</p>
                </div>
                <div class="header-actions">
                    <button class="voice-btn" onclick="openVoiceAssistant()">
                        <span>üé§</span>
                        <span>Voice Assistant</span>
                    </button>
                    <button class="quick-action-btn" onclick="quickSale()">
                        <span>‚ö°</span>
                        <span>Quick Sale</span>
                    </button>
                    <button class="quick-action-btn" onclick="openHelpModal()" style="background: linear-gradient(135deg, var(--success) 0%, #05B889 100%);">
                        <span>‚ùì</span>
                        <span>Help Guide</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('dashboard')">
                <span>üìä</span> Dashboard
            </div>
            <div class="nav-tab" onclick="switchTab('inventory')">
                <span>üìã</span> Inventory
            </div>
            <div class="nav-tab" onclick="switchTab('sales')">
                <span>üì±</span> Sales
            </div>
            <div class="nav-tab" onclick="switchTab('customers')">
                <span>üë•</span> Customers
            </div>
            <div class="nav-tab" onclick="switchTab('expenses')">
                <span>üí∞</span> Expenses
            </div>
            <div class="nav-tab" onclick="switchTab('reports')">
                <span>üìà</span> Reports
            </div>
            <div class="nav-tab" onclick="switchTab('ai-insights')">
                <span>ü§ñ</span> AI Insights
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="todaySales">‚Çπ0</div>
                    <div class="stat-label">Today's Sales</div>
                    <div class="stat-change positive" id="todaySalesChange">+12% from yesterday</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCustomers">0</div>
                    <div class="stat-label">Total Customers</div>
                    <div class="stat-change positive">+5 this week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="lowStockItems">0</div>
                    <div class="stat-label">Low Stock Items</div>
                    <div class="stat-change negative">Needs attention</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthProfit">‚Çπ0</div>
                    <div class="stat-label">This Month Profit</div>
                    <div class="stat-change positive">+18% vs last month</div>
                </div>
            </div>

            <!-- Dashboard Grid -->
            <div class="dashboard-grid">
                <!-- Today's Overview -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-primary">üìä</span>
                            Today's Overview
                        </div>
                    </div>
                    <div id="todayOverview">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <!-- Alerts & Notifications -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-warning">‚ö†Ô∏è</span>
                            Alerts & Actions
                        </div>
                    </div>
                    <div id="alertsPanel">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <!-- Top Selling Products -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-success">üèÜ</span>
                            Top Products
                        </div>
                    </div>
                    <div id="topProducts">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon icon-primary">üìã</span>
                        Inventory Management
                    </div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="btn btn-success" onclick="exportToExcel()">üìä Export Excel</button>
                        <button class="btn btn-secondary" onclick="importFromExcel()">üì• Import Excel</button>
                        <button class="btn btn-primary" onclick="openInventoryModal()">‚ûï Add Product</button>
                    </div>
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Stock</th>
                                <th>Avg Sales</th>
                                <th>Expiry</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTable">
                            <tr><td colspan="6" style="text-align: center; padding: 40px;"><div class="loading"></div></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Sales Tab -->
        <div id="sales" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon icon-success">üì±</span>
                        Sales Management
                    </div>
                    <button class="btn btn-primary" onclick="openSaleModal()">‚ûï New Sale</button>
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Customer</th>
                                <th>Items</th>
                                <th>Amount</th>
                                <th>Payment</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="salesTable">
                            <tr><td colspan="6" style="text-align: center; padding: 40px;">No sales recorded yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Customers Tab -->
        <div id="customers" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon icon-secondary">üë•</span>
                        Customer Management
                    </div>
                    <button class="btn btn-primary" onclick="openCustomerModal()">‚ûï Add Customer</button>
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Total Purchases</th>
                                <th>Last Visit</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTable">
                            <tr><td colspan="5" style="text-align: center; padding: 40px;">No customers added yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span class="card-icon icon-warning">üí∞</span>
                        Expense Tracking
                    </div>
                    <button class="btn btn-primary" onclick="openExpenseModal()">‚ûï Add Expense</button>
                </div>
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="expensesTable">
                            <tr><td colspan="5" style="text-align: center; padding: 40px;">No expenses recorded yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-primary">üìà</span>
                            Sales Summary
                        </div>
                    </div>
                    <div id="salesSummary">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-success">üèÜ</span>
                            Best Sellers
                        </div>
                    </div>
                    <div id="bestSellers">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-warning">üìâ</span>
                            Slow Moving
                        </div>
                    </div>
                    <div id="slowMoving">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-secondary">üíµ</span>
                            Profit Analysis
                        </div>
                    </div>
                    <div id="profitAnalysis">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Insights Tab -->
        <div id="ai-insights" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-secondary">ü§ñ</span>
                            AI Price Suggestions
                        </div>
                    </div>
                    <div id="priceSuggestions">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-warning">üìÖ</span>
                            Seasonal Predictions
                        </div>
                    </div>
                    <div id="seasonalPredictions">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-primary">üéØ</span>
                            Smart Promotions
                        </div>
                    </div>
                    <div id="smartPromotions">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon icon-success">üìä</span>
                            Demand Forecast
                        </div>
                    </div>
                    <div id="demandForecast">
                        <div class="loading" style="margin: 40px auto;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals will go here -->
    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content help-modal">
            <div class="modal-header">
                <h2 class="modal-title">üìö ‡§¶‡•Å‡§ï‡§æ‡§® AI Pro - Complete Guide</h2>
                <button class="close-btn" onclick="closeModal('helpModal')">√ó</button>
            </div>

            <div class="help-tabs">
                <button class="help-tab active" onclick="switchHelpTab('quick-start')">‚ö° Quick Start</button>
                <button class="help-tab" onclick="switchHelpTab('tutorials')">üìñ Tutorials</button>
                <button class="help-tab" onclick="switchHelpTab('features')">‚ú® Features</button>
                <button class="help-tab" onclick="switchHelpTab('faq')">‚ùì FAQ</button>
            </div>

            <!-- Quick Start -->
            <div id="quick-start" class="help-content active">
                <h3 style="margin-bottom: 20px; color: var(--primary);">üöÄ Get Started in 5 Minutes</h3>
                
                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">1Ô∏è‚É£</div>
                        <div class="tutorial-title">Setup Your Inventory</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text">Go to <strong>Inventory</strong> tab</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text">Click <strong>‚ûï Add Product</strong> button</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Enter product details: Name, Stock, Average Sales, Expiry Date</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text">Click <strong>Save Product</strong></div>
                        </div>
                    </div>
                    <div class="tutorial-tip">
                        <div class="tutorial-tip-header">üí° Pro Tip</div>
                        <div class="tutorial-tip-text">Already have data in Excel? Click "üì• Import Excel" to upload all products at once!</div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">2Ô∏è‚É£</div>
                        <div class="tutorial-title">Record Your First Sale</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text">Click <strong>‚ö° Quick Sale</strong> in header OR go to Sales tab</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text">Select customer (or add new)</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Add items and quantities</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text">Enter amount and payment method</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">5</div>
                            <div class="step-text">Save - Stock automatically updates!</div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">3Ô∏è‚É£</div>
                        <div class="tutorial-title">Track Expenses</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text">Go to <strong>üí∞ Expenses</strong> tab</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text">Click <strong>‚ûï Add Expense</strong></div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Select category: Rent, Electricity, Supplies, etc.</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text">Enter amount and description</div>
                        </div>
                    </div>
                    <div class="tutorial-tip">
                        <div class="tutorial-tip-header">üí° Pro Tip</div>
                        <div class="tutorial-tip-text">Regular expenses like rent can be added monthly. System calculates your true profit!</div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">4Ô∏è‚É£</div>
                        <div class="tutorial-title">Get AI Insights</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text">Go to <strong>ü§ñ AI Insights</strong> tab</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text">View AI suggestions for pricing, promotions, and seasonal trends</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text">Check demand forecast to plan restocking</div>
                        </div>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #D4F4EC 0%, #B8EFE1 100%); padding: 20px; border-radius: 12px; margin-top: 24px;">
                    <h4 style="color: var(--success); margin-bottom: 12px;">‚úÖ You're All Set!</h4>
                    <p style="color: var(--text-dark); margin-bottom: 12px;">Your shop management system is ready. Check the <strong>Dashboard</strong> daily for overview and alerts.</p>
                    <p style="color: var(--text-gray); font-size: 14px;">Need help? Click ‚ùì Help Guide anytime or use üé§ Voice Assistant in Hindi!</p>
                </div>
            </div>

            <!-- Tutorials -->
            <div id="tutorials" class="help-content">
                <h3 style="margin-bottom: 20px; color: var(--primary);">üìñ Detailed Tutorials</h3>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">üìã</div>
                        <div class="tutorial-title">Inventory Management</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text"><strong>Add Products:</strong> Click ‚ûï Add Product, fill details, save</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text"><strong>Edit Products:</strong> Click Edit button on any row to update stock or details</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text"><strong>Export to Excel:</strong> Click üìä Export Excel - download file, edit in Excel/Sheets</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text"><strong>Import from Excel:</strong> After editing, click üì• Import Excel to upload</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">5</div>
                            <div class="step-text"><strong>Status Colors:</strong> Red = Low stock, Yellow = Medium, Green = Good</div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">üì±</div>
                        <div class="tutorial-title">Sales Tracking</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text"><strong>Quick Sale:</strong> Use ‚ö° Quick Sale button for fast checkout</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text"><strong>Detailed Sale:</strong> Go to Sales tab ‚Üí ‚ûï New Sale for full invoice</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text"><strong>Customer Selection:</strong> Choose existing customer or add new</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text"><strong>Payment Methods:</strong> Cash, UPI, Card - track payment types</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">5</div>
                            <div class="step-text"><strong>Auto Updates:</strong> Stock reduces automatically, sales added to reports</div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">üë•</div>
                        <div class="tutorial-title">Customer Management</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text"><strong>Add Customer:</strong> Name, phone, address (optional)</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text"><strong>Track Purchases:</strong> System automatically tracks total spent</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text"><strong>Last Visit:</strong> See when customer last came</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text"><strong>Regular Customers:</strong> Identify and reward loyal customers</div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">üìà</div>
                        <div class="tutorial-title">Reports & Analysis</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text"><strong>Sales Summary:</strong> Daily/weekly/monthly revenue tracking</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text"><strong>Best Sellers:</strong> See top 5 products by sales volume</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text"><strong>Slow Moving:</strong> Products that need promotions</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text"><strong>Profit Analysis:</strong> Revenue minus expenses = your true profit</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">5</div>
                            <div class="step-text"><strong>GST Reports:</strong> Auto-generated for tax filing</div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">ü§ñ</div>
                        <div class="tutorial-title">AI Business Intelligence</div>
                    </div>
                    <div class="tutorial-steps">
                        <div class="tutorial-step">
                            <div class="step-number">1</div>
                            <div class="step-text"><strong>Price Suggestions:</strong> AI analyzes demand and suggests optimal prices</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">2</div>
                            <div class="step-text"><strong>Seasonal Trends:</strong> Predictions for festivals (Holi, Diwali, etc.)</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">3</div>
                            <div class="step-text"><strong>Smart Promotions:</strong> Which products to discount and by how much</div>
                        </div>
                        <div class="tutorial-step">
                            <div class="step-number">4</div>
                            <div class="step-text"><strong>Demand Forecast:</strong> Predict next week's sales for each product</div>
                        </div>
                    </div>
                    <div class="tutorial-tip">
                        <div class="tutorial-tip-header">üí° Pro Tip</div>
                        <div class="tutorial-tip-text">Check AI Insights weekly to stay ahead of market trends and maximize profits!</div>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div id="features" class="help-content">
                <h3 style="margin-bottom: 20px; color: var(--primary);">‚ú® All Features Overview</h3>

                <div class="quick-links">
                    <div class="quick-link-card" onclick="alert('Dashboard shows real-time stats: sales, customers, alerts, and top products at a glance!')">
                        <div class="quick-link-icon">üìä</div>
                        <div class="quick-link-title">Dashboard Overview</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Manage all products, track stock levels, set expiry dates, import/export Excel files!')">
                        <div class="quick-link-icon">üìã</div>
                        <div class="quick-link-title">Inventory Control</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Record every sale, generate bills, track payment methods, auto-update stock!')">
                        <div class="quick-link-icon">üì±</div>
                        <div class="quick-link-title">Sales Recording</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Track regular customers, purchase history, last visit date, build loyalty!')">
                        <div class="quick-link-icon">üë•</div>
                        <div class="quick-link-title">Customer Database</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Log all expenses: rent, electricity, supplies. Calculate true profit automatically!')">
                        <div class="quick-link-icon">üí∞</div>
                        <div class="quick-link-title">Expense Tracking</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Comprehensive reports: sales summary, best sellers, slow movers, profit analysis!')">
                        <div class="quick-link-icon">üìà</div>
                        <div class="quick-link-title">Business Reports</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('AI-powered: price suggestions, seasonal predictions, smart promotions, demand forecasting!')">
                        <div class="quick-link-icon">ü§ñ</div>
                        <div class="quick-link-title">AI Intelligence</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Export inventory to Excel, edit in bulk, import back. Full Excel integration!')">
                        <div class="quick-link-icon">üìä</div>
                        <div class="quick-link-title">Excel Integration</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Ask questions in Hindi: ‡§Ü‡§ú ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•à? ‡§ï‡•å‡§® ‡§∏‡§æ ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ñ‡§§‡•ç‡§Æ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à?')">
                        <div class="quick-link-icon">üé§</div>
                        <div class="quick-link-title">Voice Assistant</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Automatic GST calculation and report generation for easy tax filing!')">
                        <div class="quick-link-icon">üìÑ</div>
                        <div class="quick-link-title">GST Reports</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Get alerts for low stock, expiring products, and important actions needed!')">
                        <div class="quick-link-icon">‚ö†Ô∏è</div>
                        <div class="quick-link-title">Smart Alerts</div>
                    </div>
                    <div class="quick-link-card" onclick="alert('Fast checkout for quick transactions. Perfect for busy times!')">
                        <div class="quick-link-icon">‚ö°</div>
                        <div class="quick-link-title">Quick Sale</div>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%); padding: 20px; border-radius: 12px; margin-top: 24px;">
                    <h4 style="color: var(--secondary); margin-bottom: 12px;">üåü Why ‡§¶‡•Å‡§ï‡§æ‡§® AI Pro?</h4>
                    <ul style="color: var(--text-dark); line-height: 2; margin-left: 20px;">
                        <li><strong>Complete Solution:</strong> Everything you need in one place</li>
                        <li><strong>AI-Powered:</strong> Smart suggestions to grow your business</li>
                        <li><strong>Easy to Use:</strong> Simple interface in Hindi + English</li>
                        <li><strong>Excel Support:</strong> Edit data the way you're comfortable</li>
                        <li><strong>Mobile Friendly:</strong> Works on phone, tablet, computer</li>
                        <li><strong>Offline Ready:</strong> Your data stays with you</li>
                    </ul>
                </div>
            </div>

            <!-- FAQ -->
            <div id="faq" class="help-content">
                <h3 style="margin-bottom: 20px; color: var(--primary);">‚ùì Frequently Asked Questions</h3>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Is my data safe and private?
                    </div>
                    <div class="faq-answer">
                        Yes! All your data is stored locally on your device (browser storage). Nothing is sent to any server. You have complete control and privacy. You can also export to Excel files for backup on your PC.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        How do I backup my data?
                    </div>
                    <div class="faq-answer">
                        Go to Inventory tab and click "üìä Export Excel". This downloads all your data as an Excel file. Save this file on your computer, Google Drive, or USB drive. You can import it back anytime using "üì• Import Excel".
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Can I use this on my mobile phone?
                    </div>
                    <div class="faq-answer">
                        Absolutely! ‡§¶‡•Å‡§ï‡§æ‡§® AI Pro works perfectly on phones, tablets, and computers. The interface automatically adjusts to your screen size. Save this webpage to your home screen for easy access.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Do I need internet connection?
                    </div>
                    <div class="faq-answer">
                        Most features work offline. You only need internet for AI Insights (price suggestions, seasonal predictions, etc.). Your data entry, sales recording, and reports all work without internet.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        How to use Voice Assistant in Hindi?
                    </div>
                    <div class="faq-answer">
                        Click the üé§ Voice Assistant button in header. Then speak in Hindi like: "‡§Ü‡§ú ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•à?" or "‡§ï‡•å‡§® ‡§∏‡§æ ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§ñ‡§§‡•ç‡§Æ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à?" or "‡§¶‡•Ç‡§ß ‡§ï‡§æ ‡§∏‡•ç‡§ü‡•â‡§ï ‡§¨‡§§‡§æ‡§ì". The AI will understand and respond.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Can multiple people use this shop?
                    </div>
                    <div class="faq-answer">
                        Yes, but currently data is stored per device/browser. For multi-user: (1) Use same device for all staff, or (2) Export Excel daily and share file, or (3) Use same browser account synced across devices.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        What happens if I clear browser data?
                    </div>
                    <div class="faq-answer">
                        Your inventory will be deleted if you clear browser storage. That's why we recommend: (1) Export to Excel regularly, (2) Don't use browser's "Clear all data" option, (3) Keep Excel backups safe.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        How accurate are AI predictions?
                    </div>
                    <div class="faq-answer">
                        AI analyzes your sales patterns, seasonal trends, and market data. Accuracy improves with more data. Predictions are 80-95% confident. Use them as helpful suggestions, not absolute rules.
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Can I add products in bulk?
                    </div>
                    <div class="faq-answer">
                        Yes! Use Excel integration: (1) Click "üìä Export Excel" to get template, (2) Open in Excel/Sheets, (3) Add all your products, (4) Save file, (5) Click "üì• Import Excel" to upload. Much faster than adding one by one!
                    </div>
                </div>

                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">
                        Is this really free to use?
                    </div>
                    <div class="faq-answer">
                        Yes, completely free! All features are available. No hidden charges, no premium plans. Built to help small shop owners in India manage their business better.
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #FFF3CD 0%, #FFE5A3 100%); padding: 20px; border-radius: 12px; margin-top: 24px; text-align: center;">
                    <h4 style="color: var(--warning); margin-bottom: 8px;">Still have questions?</h4>
                    <p style="color: var(--text-dark);">Use the üé§ Voice Assistant or explore the tutorials above!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Other Modals -->
    <div id="inventoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Product</h2>
                <button class="close-btn" onclick="closeModal('inventoryModal')">√ó</button>
            </div>
            <form onsubmit="saveInventory(event)">
                <div class="form-group">
                    <label class="form-label">Product Name</label>
                    <input type="text" class="form-input" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Current Stock</label>
                        <input type="number" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Avg Weekly Sales</label>
                        <input type="number" class="form-input" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Expiry Date</label>
                    <input type="date" class="form-input" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Save Product</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // Data Storage
        let inventory = [];
        let sales = [];
        let customers = [];
        let expenses = [];

        // Initialize
        function init() {
            loadData();
            updateDashboard();
            loadAIInsights();
        }

        function loadData() {
            inventory = JSON.parse(localStorage.getItem('inventory') || '[]');
            sales = JSON.parse(localStorage.getItem('sales') || '[]');
            customers = JSON.parse(localStorage.getItem('customers') || '[]');
            expenses = JSON.parse(localStorage.getItem('expenses') || '[]');
            
            if (inventory.length === 0) {
                inventory = [
                    { id: 1, name: '‡§¶‡•Ç‡§ß ‡§™‡•à‡§ï‡•á‡§ü (Milk)', current: 45, avgSales: 50, expiry: '2026-02-20', price: 60 },
                    { id: 2, name: '‡§¨‡•ç‡§∞‡•á‡§° (Bread)', current: 30, avgSales: 35, expiry: '2026-02-18', price: 40 },
                    { id: 3, name: '‡§¨‡§ø‡§∏‡•ç‡§ï‡•Å‡§ü (Biscuits)', current: 80, avgSales: 60, expiry: '2026-03-15', price: 30 }
                ];
                saveData();
            }
        }

        function saveData() {
            localStorage.setItem('inventory', JSON.stringify(inventory));
            localStorage.setItem('sales', JSON.stringify(sales));
            localStorage.setItem('customers', JSON.stringify(customers));
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.closest('.nav-tab').classList.add('active');
            
            if (tabName === 'inventory') renderInventoryTable();
            if (tabName === 'sales') renderSalesTable();
            if (tabName === 'customers') renderCustomersTable();
            if (tabName === 'expenses') renderExpensesTable();
            if (tabName === 'reports') generateReports();
            if (tabName === 'ai-insights') loadAIInsights();
        }

        // Dashboard Updates
        function updateDashboard() {
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(s => s.date === today).reduce((sum, s) => sum + s.amount, 0);
            const lowStock = inventory.filter(i => i.current < i.avgSales).length;
            
            document.getElementById('todaySales').textContent = `‚Çπ${todaySales.toLocaleString('en-IN')}`;
            document.getElementById('totalCustomers').textContent = customers.length;
            document.getElementById('lowStockItems').textContent = lowStock;
            document.getElementById('monthProfit').textContent = '‚Çπ' + (todaySales * 0.2).toFixed(0);
            
            renderTodayOverview();
            renderAlerts();
            renderTopProducts();
        }

        function renderTodayOverview() {
            const html = `
                <div class="quick-stat">
                    <span>Total Transactions</span>
                    <strong>${sales.length}</strong>
                </div>
                <div class="quick-stat">
                    <span>Products Sold</span>
                    <strong>${sales.reduce((sum, s) => sum + (s.items || 1), 0)}</strong>
                </div>
                <div class="quick-stat">
                    <span>Avg Sale Value</span>
                    <strong>‚Çπ${sales.length > 0 ? (sales.reduce((sum, s) => sum + s.amount, 0) / sales.length).toFixed(0) : 0}</strong>
                </div>
            `;
            document.getElementById('todayOverview').innerHTML = html;
        }

        function renderAlerts() {
            const lowStock = inventory.filter(i => i.current < i.avgSales);
            const expiring = inventory.filter(i => {
                const days = Math.ceil((new Date(i.expiry) - new Date()) / (1000 * 60 * 60 * 24));
                return days < 7 && days > 0;
            });
            
            let html = '';
            if (lowStock.length > 0) {
                html += `<div class="badge badge-warning" style="display: block; margin-bottom: 8px;">‚ö†Ô∏è ${lowStock.length} items low on stock</div>`;
            }
            if (expiring.length > 0) {
                html += `<div class="badge badge-danger" style="display: block; margin-bottom: 8px;">üö® ${expiring.length} items expiring soon</div>`;
            }
            if (html === '') {
                html = '<p style="color: var(--success);">‚úÖ All good! No alerts.</p>';
            }
            document.getElementById('alertsPanel').innerHTML = html;
        }

        function renderTopProducts() {
            const topProds = inventory.sort((a, b) => b.avgSales - a.avgSales).slice(0, 5);
            const html = topProds.map((p, i) => `
                <div class="quick-stat">
                    <span>${i + 1}. ${p.name}</span>
                    <strong>${p.avgSales}/week</strong>
                </div>
            `).join('');
            document.getElementById('topProducts').innerHTML = html;
        }

        // Inventory Management
        function renderInventoryTable() {
            const tbody = document.getElementById('inventoryTable');
            if (inventory.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 40px;">No products yet</td></tr>';
                return;
            }
            
            tbody.innerHTML = inventory.map(item => {
                const status = item.current < item.avgSales ? 'Low' : item.current < item.avgSales * 2 ? 'Medium' : 'Good';
                const badgeClass = status === 'Low' ? 'badge-danger' : status === 'Medium' ? 'badge-warning' : 'badge-success';
                
                return `
                    <tr>
                        <td><strong>${item.name}</strong></td>
                        <td>${item.current}</td>
                        <td>${item.avgSales}</td>
                        <td>${new Date(item.expiry).toLocaleDateString('en-IN')}</td>
                        <td><span class="badge ${badgeClass}">${status}</span></td>
                        <td>
                            <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 12px;" onclick="editItem(${item.id})">Edit</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Excel Functions
        function exportToExcel() {
            const ws = XLSX.utils.json_to_sheet(inventory.map(i => ({
                'Product': i.name,
                'Stock': i.current,
                'Avg Sales': i.avgSales,
                'Expiry': i.expiry,
                'Price': i.price || 0
            })));
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Inventory');
            XLSX.writeFile(wb, `Inventory_${new Date().toISOString().split('T')[0]}.xlsx`);
            alert('‚úÖ Excel file downloaded!');
        }

        function importFromExcel() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.xlsx,.xls';
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = event => {
                    const wb = XLSX.read(new Uint8Array(event.target.result), {type: 'array'});
                    const ws = wb.Sheets[wb.SheetNames[0]];
                    const data = XLSX.utils.sheet_to_json(ws);
                    if (confirm(`Import ${data.length} products?`)) {
                        inventory = data.map((d, i) => ({
                            id: i + 1,
                            name: d.Product || d.product,
                            current: parseInt(d.Stock || d.stock),
                            avgSales: parseInt(d['Avg Sales'] || d.avgSales),
                            expiry: d.Expiry || d.expiry,
                            price: parseFloat(d.Price || d.price || 0)
                        }));
                        saveData();
                        renderInventoryTable();
                        alert('‚úÖ Imported successfully!');
                    }
                };
                reader.readAsArrayBuffer(file);
            };
            input.click();
        }

        // AI Insights
        async function loadAIInsights() {
            generatePriceSuggestions();
            generateSeasonalPredictions();
            generateSmartPromotions();
            generateDemandForecast();
        }

        async function generatePriceSuggestions() {
            const container = document.getElementById('priceSuggestions');
            container.innerHTML = '<div class="loading"></div>';
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Analyze inventory and suggest optimal prices. Return ONLY JSON:
${JSON.stringify(inventory.slice(0, 5))}

Format:
{
  "suggestions": [
    {"product": "name", "currentPrice": number, "suggestedPrice": number, "reason": "brief reason in Hindi"}
  ]
}`
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.content.find(i => i.type === 'text')?.text || '{}';
                const result = JSON.parse(text.replace(/```json|```/g, '').trim());
                
                container.innerHTML = result.suggestions.map(s => `
                    <div class="ai-suggestion">
                        <div class="ai-suggestion-header">ü§ñ ${s.product}</div>
                        <div class="ai-suggestion-text">
                            Current: ‚Çπ${s.currentPrice} ‚Üí Suggested: ‚Çπ${s.suggestedPrice}<br>
                            <small>${s.reason}</small>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<p style="color: var(--text-gray);">Error loading suggestions</p>';
            }
        }

        async function generateSeasonalPredictions() {
            const container = document.getElementById('seasonalPredictions');
            container.innerHTML = '<div class="loading"></div>';
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Predict upcoming seasonal trends for Indian shop. Current date: Feb 2026. Return ONLY JSON:

Format:
{
  "predictions": [
    {"event": "festival/season name", "date": "approx date", "impact": "high/medium", "suggestion": "advice in Hindi"}
  ]
}

Include: Holi, summer season, school reopening`
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.content.find(i => i.type === 'text')?.text || '{}';
                const result = JSON.parse(text.replace(/```json|```/g, '').trim());
                
                container.innerHTML = result.predictions.map(p => `
                    <div class="ai-suggestion">
                        <div class="ai-suggestion-header">üìÖ ${p.event} (${p.date})</div>
                        <div class="ai-suggestion-text">
                            <span class="badge badge-${p.impact === 'high' ? 'danger' : 'warning'}">${p.impact.toUpperCase()} IMPACT</span><br>
                            ${p.suggestion}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<p style="color: var(--text-gray);">Error loading predictions</p>';
            }
        }

        async function generateSmartPromotions() {
            const container = document.getElementById('smartPromotions');
            container.innerHTML = '<div class="loading"></div>';
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Suggest smart promotions for slow-moving inventory. Return ONLY JSON:
${JSON.stringify(inventory)}

Format:
{
  "promotions": [
    {"product": "name", "strategy": "discount/bundle/bogo", "discount": "10-30%", "reason": "in Hindi"}
  ]
}`
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.content.find(i => i.type === 'text')?.text || '{}';
                const result = JSON.parse(text.replace(/```json|```/g, '').trim());
                
                container.innerHTML = result.promotions.map(p => `
                    <div class="ai-suggestion">
                        <div class="ai-suggestion-header">üéØ ${p.product}</div>
                        <div class="ai-suggestion-text">
                            <strong>${p.strategy.toUpperCase()}: ${p.discount} OFF</strong><br>
                            ${p.reason}
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<p style="color: var(--text-gray);">Error loading promotions</p>';
            }
        }

        async function generateDemandForecast() {
            const container = document.getElementById('demandForecast');
            container.innerHTML = '<div class="loading"></div>';
            
            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        messages: [{
                            role: 'user',
                            content: `Forecast demand for next week. Return ONLY JSON:
${JSON.stringify(inventory.slice(0, 5))}

Format:
{
  "forecasts": [
    {"product": "name", "predicted": number, "confidence": "80-95%", "trend": "up/down/stable"}
  ]
}`
                        }]
                    })
                });
                
                const data = await response.json();
                const text = data.content.find(i => i.type === 'text')?.text || '{}';
                const result = JSON.parse(text.replace(/```json|```/g, '').trim());
                
                container.innerHTML = result.forecasts.map(f => `
                    <div class="quick-stat">
                        <span>${f.product}</span>
                        <strong>${f.predicted} units ${f.trend === 'up' ? '‚Üë' : f.trend === 'down' ? '‚Üì' : '‚Üí'}</strong>
                    </div>
                `).join('');
            } catch (error) {
                container.innerHTML = '<p style="color: var(--text-gray);">Error loading forecast</p>';
            }
        }

        // Reports
        function generateReports() {
            generateSalesSummary();
            generateBestSellers();
            generateSlowMoving();
            generateProfitAnalysis();
        }

        function generateSalesSummary() {
            const total = sales.reduce((sum, s) => sum + s.amount, 0);
            const html = `
                <div class="quick-stat">
                    <span>Total Sales</span>
                    <strong>‚Çπ${total.toLocaleString('en-IN')}</strong>
                </div>
                <div class="quick-stat">
                    <span>Transactions</span>
                    <strong>${sales.length}</strong>
                </div>
                <div class="quick-stat">
                    <span>Average Sale</span>
                    <strong>‚Çπ${sales.length > 0 ? (total / sales.length).toFixed(0) : 0}</strong>
                </div>
            `;
            document.getElementById('salesSummary').innerHTML = html;
        }

        function generateBestSellers() {
            const top = inventory.sort((a, b) => b.avgSales - a.avgSales).slice(0, 5);
            const html = top.map((p, i) => `
                <div class="quick-stat">
                    <span>${i + 1}. ${p.name}</span>
                    <strong>${p.avgSales}/week</strong>
                </div>
            `).join('');
            document.getElementById('bestSellers').innerHTML = html;
        }

        function generateSlowMoving() {
            const slow = inventory.sort((a, b) => a.avgSales - b.avgSales).slice(0, 5);
            const html = slow.map((p, i) => `
                <div class="quick-stat">
                    <span>${p.name}</span>
                    <strong>${p.avgSales}/week</strong>
                </div>
            `).join('');
            document.getElementById('slowMoving').innerHTML = html;
        }

        function generateProfitAnalysis() {
            const revenue = sales.reduce((sum, s) => sum + s.amount, 0);
            const totalExpenses = expenses.reduce((sum, e) => sum + e.amount, 0);
            const profit = revenue - totalExpenses;
            
            const html = `
                <div class="quick-stat">
                    <span>Revenue</span>
                    <strong style="color: var(--success);">‚Çπ${revenue.toLocaleString('en-IN')}</strong>
                </div>
                <div class="quick-stat">
                    <span>Expenses</span>
                    <strong style="color: var(--danger);">‚Çπ${totalExpenses.toLocaleString('en-IN')}</strong>
                </div>
                <div class="quick-stat">
                    <span>Net Profit</span>
                    <strong style="color: ${profit > 0 ? 'var(--success)' : 'var(--danger)'};">‚Çπ${profit.toLocaleString('en-IN')}</strong>
                </div>
            `;
            document.getElementById('profitAnalysis').innerHTML = html;
        }

        // Modal Functions
        function openInventoryModal() {
            document.getElementById('inventoryModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function saveInventory(e) {
            e.preventDefault();
            alert('Product saved! (Full implementation in production)');
            closeModal('inventoryModal');
        }

        function openSaleModal() {
            alert('Sale modal - coming soon!');
        }

        function openCustomerModal() {
            alert('Customer modal - coming soon!');
        }

        function openExpenseModal() {
            alert('Expense modal - coming soon!');
        }

        function quickSale() {
            alert('Quick sale feature - scan barcode or select product');
        }

        function openVoiceAssistant() {
            alert('Voice assistant - say commands in Hindi like "‡§Ü‡§ú ‡§ï‡•Ä ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä ‡§¨‡§§‡§æ‡§ì"');
        }

        // Help Modal Functions
        function openHelpModal() {
            document.getElementById('helpModal').classList.add('active');
        }

        function switchHelpTab(tabName) {
            // Remove active from all tabs and content
            document.querySelectorAll('.help-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.help-content').forEach(content => content.classList.remove('active'));
            
            // Add active to clicked tab and corresponding content
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function toggleFAQ(element) {
            // Close all other FAQs
            document.querySelectorAll('.faq-item').forEach(item => {
                if (item !== element) {
                    item.classList.remove('active');
                }
            });
            
            // Toggle clicked FAQ
            element.classList.toggle('active');
        }

        function renderSalesTable() {
            document.getElementById('salesTable').innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 40px;">Feature ready - add sales through Quick Sale button</td></tr>';
        }

        function renderCustomersTable() {
            document.getElementById('customersTable').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">Add your first customer using the Add Customer button</td></tr>';
        }

        function renderExpensesTable() {
            document.getElementById('expensesTable').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">Track your shop expenses here</td></tr>';
        }

        // Initialize on load
        window.addEventListener('load', init);
    </script>
</body>
</html>